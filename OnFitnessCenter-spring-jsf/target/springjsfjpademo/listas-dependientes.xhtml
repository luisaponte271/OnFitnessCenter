<!DOCTYPE html>
<html lang="es"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
	<meta charset="utf-8" />
	<title>Listas dependientes</title>
</h:head>
<h:body>
	<script
		src="https://code.jquery.com/jquery-3.4.0.slim.js"
		integrity="sha256-milezx5lakrZu0OP9b2QWFy1ft/UEUK6NH1Jqz8hUhQ="
		crossorigin="anonymous"></script>
	<h1>Ejemplo de listas dependientes</h1>
	<ui:remove>
    <hr />
    <h:form>
        <h2>Sin Ajax</h2>
        <div>
            <h3>Departamentos</h3>
            <h:selectOneMenu id="somDepartamentos" value="#{listaDesplegable.departamentoSeleccionado}">
                <f:selectItem itemValue="#{null}" itemLabel="SELECCIONE" />
                <f:selectItems value="#{listaDesplegable.listaDepartamentos}" var="departamento"
                    itemValue="#{departamento}" itemLabel="#{departamento.nombre}" />
                <f:ajax render="somProvincias,somDistritos" />
            </h:selectOneMenu>
        </div>
        <div>
            <h3>Provincias</h3>
            <h:selectOneMenu id="somProvincias" value="#{listaDesplegable.provinciaSeleccionada}">
                <f:selectItem itemValue="#{null}" itemLabel="SELECCIONE" />
                <f:selectItems value="#{listaDesplegable.listaProvincias}" var="provincia"
                    itemValue="#{provincia}" itemLabel="#{provincia.nombre}" />
                <f:ajax render="somDistritos" />
            </h:selectOneMenu>
        </div>
        <div>
            <h3>Distritos</h3>
            <h:selectOneMenu id="somDistritos" value="#{listaDesplegable.distritoSeleccionado}">
                <f:selectItem itemValue="#{null}" itemLabel="SELECCIONE" />
                <f:selectItems value="#{listaDesplegable.listaDistritos}" var="distrito"
                    itemValue="#{distrito}" itemLabel="#{distrito.nombre}" />
            </h:selectOneMenu>
        </div>
    </h:form>
    </ui:remove>
    <hr />
    <h:form id="frmSOMDependiente">
        <h2>Con Ajax</h2>
        <div>
            <h3>Departamentos</h3>
            <h:selectOneMenu id="somDepartamentos"
            	value="#{listaDesplegableConAjax.idDepartamentoSeleccionado}">
                <f:selectItem itemValue="#{null}" itemLabel="SELECCIONE" />
                <f:selectItems
                	value="#{listaDesplegableConAjax.listaDepartamentos}"
                	var="departamento" itemValue="#{departamento.id}"
                	itemLabel="#{departamento.nombre}" />
                <f:ajax render="somProvincias somDistritos pgpContenedor"
                	listener="#{listaDesplegableConAjax.cargarProvincias}" />
            </h:selectOneMenu>
        </div>
        <div>
            <h3>Provincias</h3>
            <h:selectOneMenu id="somProvincias" value="#{listaDesplegableConAjax.idProvinciaSeleccionada}">
                <f:selectItem itemValue="#{null}" itemLabel="SELECCIONE" />
                <f:selectItems
                	value="#{listaDesplegableConAjax.listaProvincias}"
                	var="provincia" itemValue="#{provincia.id}"
                	itemLabel="#{provincia.nombre}" />
                <f:ajax render="somDistritos pgpContenedor"
                	listener="#{listaDesplegableConAjax.cargarDistritos}" />
            </h:selectOneMenu>
        </div>
        <div>
            <h3>Distritos</h3>
            <h:selectOneMenu id="somDistritos" value="#{listaDesplegableConAjax.idDistritoSeleccionado}">
                <f:selectItem itemValue="#{null}" itemLabel="SELECCIONE" />
                <f:selectItems
                	value="#{listaDesplegableConAjax.listaDistritos}"
                	var="distrito" itemValue="#{distrito.id}"
                	itemLabel="#{distrito.nombre}" />
                <f:ajax render="pgpContenedor"
                	listener="#{listaDesplegableConAjax.cargarDatosSeleccionados}" />
            </h:selectOneMenu>
        </div>
        <h:messages />
    </h:form>
    <h:panelGroup id="pgpContenedor">
    	<h:panelGroup id="pgpDatos" rendered="#{listaDesplegableConAjax.muestraDatosSeleccionados}">
    		<div>
    			<h3>Departamento</h3>
    			<span>id #{listaDesplegableConAjax.departamento.id}</span>
    			<span>nombre #{listaDesplegableConAjax.departamento.nombre}</span>
    		</div>
    		<div>
    			<h3>Provincia</h3>
    			<span>id #{listaDesplegableConAjax.provincia.id}</span>
    			<span>nombre #{listaDesplegableConAjax.provincia.nombre}</span>
    		</div>
    		<div>
    			<h3>Distrito</h3>
    			<span>id #{listaDesplegableConAjax.distrito.id}</span>
    			<span>nombre #{listaDesplegableConAjax.distrito.nombre}</span>
    		</div>
    	</h:panelGroup>
    </h:panelGroup>
</h:body>
</html>
